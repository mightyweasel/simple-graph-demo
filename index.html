<!---
    The home page for the data visualizer

    Purpose of this page:
    Graph databases are interesting, but unless you are heavily into tech it can be hard to see why.
    The Neo4J Browser provides a very good visualizer once you understand Cypher.
    While explaining Neo4J it can be intimidating to people when they see Cypher / code.

    This page aims to show (and help explain) why graphs are interesting, without having to
    write or see any Cypher queries, unlike the built in Neo4J Browser

    We will leverage:
        -neoVis.js for the data visualization itself
        -materialize.css for the web page components
--->

<!DOCTYPE html>

<html>

<head>
    <title>Data Visualizer - Visualiseur de Donn√©es</title>
    <!-- Load materialize CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

    <!-- Load my custom CSS -->
    <link href="static/index.css" type="text/css" rel="stylesheet" media="screen,projection" />

    <!-- Load NeoVis.js -->
    <script src="https://cdn.neo4jlabs.com/neovis.js/v1.1.0/neovis.js"></script>

    <!-- Load jQuery -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

    <!-- Load my NeoVis JS Configs -->
    <script src="static/index.js"></script>
</head>

<body onload="draw()">
    <div class="container">

        <div class="card-panel teal lighten-2">
            <div id="viz"></div>
            <div id="vis_desc">
                <p id="vis_desc_par">First we get a course with its topic and delivery method!</p>
            </div>

            <div class="row">
                <div class="col s2">
                    <input class="btn-large" type="submit" value="Example 1" id="example1">
                </div>
                <div class="col s2">
                    <input class="btn-large" type="submit" value="Example 2" id="example2">

                </div>
                <div class="col s2">
                    <input class="btn-large" type="submit" value="Example 3" id="example3">
                </div>
                <div class="col s2">
                    <input class="btn-large" type="submit" value="Example 4" id="example4">
                </div>
                <div class="col s2">
                    <input class="btn-large" type="submit" value="Example 5" id="example5">
                </div>
                <div class="col s2">
                    <input class="btn-large" type="submit" value="Example 6" id="example6">
                </div>

            </div>
        </div>
    </div>
</body>

<script>
    $("#example1").click(function () {
        var cypher = "MATCH (c:Course{code:'X042'})-[r:TOPIC]->(n:Topic{name_en:'Human Resources'}) WITH n, c, r MATCH (c)-[rr:DELIVERED_VIA]->(d:DeliveryType) RETURN n, c, r, rr, d";
        viz.renderWithCypher(cypher);
        $("p#vis_desc_par").text("First we get a course with it's topic and delivery method!");
    });
    $("#example2").click(function () {
        var cypher = "MATCH (c:Course)-[r:TOPIC]->(n:Topic{name_en:'Human Resources'}) WITH n, c, r MATCH (c)-[rr:DELIVERED_VIA]->(d:DeliveryType) RETURN n, c, r, rr, d";
        viz.renderWithCypher(cypher);
        $("p#vis_desc_par").text("For that same topic, now we get all courses and delivery methods. Note we only have one delivery method!");
    });
    $("#example3").click(function () {
        var cypher = "MATCH (c:Course)-[r:TOPIC]->(n:Topic) WITH n, c, r MATCH (c)-[rr:DELIVERED_VIA]->(d:DeliveryType) RETURN n, c, r, rr, d";
        viz.renderWithCypher(cypher);
        $("p#vis_desc_par").text("Now we retreive all courses, topics, and delivery methods!");
    });
    $("#example4").click(function () {
        var cypher = "MATCH (n:Course)-[r:DIRECTOR]->(nn:Person) RETURN n, nn, r";
        viz.renderWithCypher(cypher);
        $("p#vis_desc_par").text("Changing gears, we get the Directors and their courses.");
    });
    $("#example5").click(function () {
        var cypher = "MATCH (n:Course)-[r:DIRECTOR]->(nn:Person) WITH n, r, nn MATCH (n)-[rr:PROJECT_LEAD]->(nnn:Person) WITH n, nn, nnn, r, rr RETURN n, nn, nnn, r, rr";
        viz.renderWithCypher(cypher);
        $("p#vis_desc_par").text("Using that, we can begin to see the communities between Directors and the Project Leads!");
    });
    $("#example6").click(function () {
        var cypher = "MATCH (n:Course)-[r:DIRECTOR]->(nn:Person) WITH n, r, nn MATCH (n)-[rr:PROJECT_LEAD]->(nnn:Person) WITH n, nn, nnn, r, rr MATCH (n)-[rrr:PROGRAM_MANAGER]->(nnnn:Person) WITH n, nn, nnn, nnnn, r, rr, rrr MATCH (n)-[rrrr:POINT_OF_CONTACT]->(nnnnn:Person) RETURN n, nn, nnn, nnnn, nnnnn, r, rr, rrr, rrrr";
        viz.renderWithCypher(cypher);
        $("p#vis_desc_par").text("Getting the remaining people and the relationships between the courses complicates things!");
    });
</script>

</html>